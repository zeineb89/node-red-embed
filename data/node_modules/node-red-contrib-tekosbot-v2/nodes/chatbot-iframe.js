var _ = require('underscore');
var utils = require('../lib/helpers/utils');
var MessageTemplate = require('../lib/message-template-async');
var emoji = require('node-emoji');
var mustache = require("mustache");

module.exports = function(RED) {

  function ChatBotIframe(config) {
    RED.nodes.createNode(this, config);
    var node = this;
    let listMessages = [];
    this.answer = config.answer;
    this.parse_mode = config.parse_mode;
    this.transports = ['telegram', 'slack', 'facebook', 'smooch'];
    
  
    this.on('input', function(msg) {

        var message = config.url;
      
        msg.payload = {
          type: 'iframe',
          content: message
        };
   
        node.send(msg);
      
    });
  }

  RED.nodes.registerType('chatbot-iframe', ChatBotIframe);
};
