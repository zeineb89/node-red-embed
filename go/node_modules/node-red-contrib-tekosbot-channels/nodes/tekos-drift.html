<!-- ***************** Drift *********************** -->

<script type="text/x-red" data-help-name="Drift">
    <h6>Drift</h6>
    <p>Reply to an end user convesartion</p>
    <p>The properties can be passed in msg :</p>
    <pre>
        <code>
            msg.payload.content: "Thanks again :)";
            msg.conversationId: "20930702018";
        </code>
    </pre>

   <p>For more information, visit this link : <a href="https://devdocs.drift.com/docs/creating-a-message"> Drift docs</a></p>
</script>

<script type="text/javascript">
    
    RED.nodes.registerType('Drift',{
        category: 'Channels',
        color:"#009f9d",
        defaults: {
            name: {value: ""},
            body: {value: ""},
            conversationId : {value: ""},
            formValue:{value:{}},
            payload: {value: ''},
            topic: {value: ''},
            drift: {type:"drift-config",required:true},
        },
        inputs:1,
        outputs:0,
        icon: "chatbot-waiting.png",
        align: 'left',
        paletteLabel: 'Drift Out',
        label: function() {
            return this.name||"Drift Out";
        },
        labelStyle: function() {
            return (this.name)?"node_label_italic":"";
        }
    });
   
</script>

<script type="text/x-red" data-template-name="Drift">
    <div class="form-row">
        <label for="node-input-drift" style="width: 110px;"><i class="fa fa-bookmark"></i> App Drift </label>
        <input type="text" id="node-input-drift">
    </div>
   <!--  <div class="form-row">
        <label for="node-input-conversationId" style="width: 110px;"><i class="fa fa-bookmark"></i> Conversation Id </label>
        <input type="text" id="node-input-conversationId">
    </div>
    <div id="body-input">
        <div class="form-row">
            <label for="node-input-body"><i class="icon-envelope"></i> Body </label>
            <textarea id="node-input-body" placeholder="Body" /> 
        </div>
    </div> -->

    <div class="form-row">
        <label for="node-input-name" style="width: 110px;"><i class="fa fa-tag"></i> Name </label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>
<!-- ***************** HUBSPOT APP CONFIG *********************** -->
<script type="text/x-red" data-template-name="drift-config">
    <div class="form-row">
        <label for="node-config-input-authToken"><i class="fa fa-tag"></i>Auth TOKEN</label>
        <input type="text" id="node-config-input-authToken" placeholder="AUTH TOKEN" />
    </div>
    <div class="form-row">
        <label for="node-config-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-config-input-name" placeholder="Name">
    </div>
  
</script>

<script type="text/javascript">
    RED.nodes.registerType('drift-config',{
        category: 'config',
        defaults: {
            authToken: {
                value:"",
                required: true
            },       
            name: {}
        },
        label: function() {
            return this.name ;
        }
        
    });
</script>
